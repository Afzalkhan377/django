{% extends 'mini_fb/base.html' %}

{% block content %}
    <h2>{{ profile.first_name }} {{ profile.last_name }}'s Profile</h2>
    
    <div>
        <img src="{{ profile.profile_image_url }}" alt="Profile Image" width="300">
        <p><strong>First Name:</strong> {{ profile.first_name }}</p>
        <p><strong>Last Name:</strong> {{ profile.last_name }}</p>
        <p><strong>City:</strong> {{ profile.city }}</p>
        <p>Email: {{ profile.email }}</p>
    </div>

    <h3>Status Messages</h3>
    <ul>
        {% for status in profile.get_status_messages %}
            <li><strong>{{ status.timestamp }}</strong>: {{ status.message }}</li>
            
           
            {% if status.get_images %}
                <div class="status-images">
                    {% for img in status.get_images %}
                        <img src="{{ img.image_file.url }}" alt="Image for {{ status.message }}" width="200">
                    {% endfor %}
                </div>
            {% endif %}
        {% empty %}
            <p>No status messages.</p>
        {% endfor %}
    </ul>
  
    <h2>Status Messages</h2>
    <ul>
        {% for st_msg in profile.get_status_messages %}
            <li>{{ st_msg.timestamp }}: {{ st_msg.message }}
                {% for img in st_msg.get_images %}
                    <img src="{{ img.image_file.url }}" alt="Status Image" style="max-width: 100px;">
                    
                {% endfor %}
                <a href="{% url 'delete_status' st_msg.pk %}" class="button button-danger">Delete</a>
                <a href="{% url 'update_status' st_msg.pk %}" class="button">Update</a>
            </li>
        {% endfor %}
    </ul>
    <h2>{{ profile.first_name }}'s Friends</h2>
    {% if profile.get_friends %}
        <ul style="list-style-type: none; padding: 0; display: flex; gap: 20px;">
            {% for friend in profile.get_friends %}
                <li style="text-align: center;">
                    <a href="{{ friend.get_absolute_url }}" style="text-decoration: none; color: inherit;">
                        <div>{{ friend.first_name }} {{ friend.last_name }}</div>
                        <img src="{{ friend.profile_image_url }}" alt="{{ friend.first_name }}'s profile picture" width="100" height="100" style="border-radius: 10px; margin-top: 5px;">
                    </a>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>This user has no friends.</p>
    {% endif %}
    <a href="{% url 'friend_suggestions' pk=profile.pk %}">Friend Suggestions</a>

<a href="{% url 'news_feed' pk=profile.pk %}">View News Feed</a>
<div class="button-container">
    <a href="{% url 'create_status' profile.pk %}" class="button">Post a Status Message</a>
    <a href="{% url 'update_profile' profile.pk %}" class="button">Update Profile</a>
</div>
{% endblock %}
